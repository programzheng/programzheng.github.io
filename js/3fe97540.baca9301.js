(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["3fe97540"],{"0748":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-table",{attrs:{title:t.title,data:t.data,columns:t.columns,"row-key":"id",pagination:t.pagination,filter:t.filter,"binary-state-sort":""},on:{"update:pagination":function(e){t.pagination=e},request:t.onRequest},scopedSlots:t._u([{key:"top-right",fn:function(){return[a("Action",{attrs:{title:"add",columns:t.columns,API:t.API}}),a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0}])})},i=[],l=(a("55dd"),a("4db1")),r=a.n(l),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md"},[a("q-btn",{attrs:{label:"Add New"},on:{click:function(e){t.addDialog=!0}}}),a("q-dialog",{model:{value:t.addDialog,callback:function(e){t.addDialog=e},expression:"addDialog"}},[a("q-card",{staticClass:"q-pa-md full-width"},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v(t._s(t.title))])]),a("q-form",t._l(t.columns,(function(e,n){return a("q-card-section",{key:n},["files"===e.type?[a("Upload",{attrs:{label:e.label,name:e.field,value:e.value},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"column.value"}})]:t._e(),"input"===e.type?a("q-input",{attrs:{label:e.label,name:e.field},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"column.value"}}):t._e(),"textarea"===e.type?a("q-input",{attrs:{label:e.label,name:e.field,type:"textarea",filled:""},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"column.value"}}):t._e()],2)})),1),a("q-btn",{attrs:{label:"Add"},on:{click:function(e){return t.add()}}})],1)],1)],1)},o=[],u=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("c47a")),c=a.n(u),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-uploader",{staticClass:"full-width",attrs:{label:t.title,factory:t.factoryFn,multiple:"",batch:""},on:{uploaded:t.fileUploaded},scopedSlots:t._u([{key:"list",fn:function(e){return[a("q-list",{attrs:{separator:""}},t._l(e.files,(function(n){return a("q-item",{key:n.name},[a("q-item-section",[a("q-item-label",{staticClass:"full-width ellipsis"},[t._v("\n            "+t._s(n.name)+"\n          ")]),a("q-item-label",{attrs:{caption:""}},[t._v("\n            Status: "+t._s(n.__status)+"\n          ")]),a("q-item-label",{attrs:{caption:""}},[t._v("\n            "+t._s(n.__sizeLabel)+" / "+t._s(n.__progressLabel)+"\n          ")])],1),n.__img?a("q-item-section",{staticClass:"gt-xs",attrs:{thumbnail:""}},[a("img",{attrs:{src:n.__img.src}})]):t._e(),a("q-item-section",{attrs:{top:"",side:""}},[a("q-btn",{staticClass:"gt-xs",attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:function(t){return e.removeFile(n)}}})],1)],1)})),1)]}}])})},p=[],f=(a("551c"),{props:{title:String,value:Array},data:function(){return{url:this.apiSetting.baseURL+"files"}},beforeCreate:function(){this.apiSetting=this.$axios.service.defaults},methods:{factoryFn:function(t){var e=this;return new Promise((function(t,a){t({url:e.url,method:"POST",headers:[{name:"Authorization",value:e.apiSetting.headers.Authorization}]})}))},fileUploaded:function(t){var e=this,a=(t.file,t.xhr),n=JSON.parse(a.response),i=r()(n.Value);i.forEach((function(t){e.value.push(t.HashID)}))}}}),m=f,g=a("2877"),h=Object(g["a"])(m,d,p,!1,null,null,null),b=h.exports;function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(a,!0).forEach((function(e){c()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var _={components:{Upload:b},props:{title:String,API:String,columns:Array},data:function(){return{addDialog:!1,addRow:Array}},methods:{formatColumn:function(){var t=this.columns.map((function(t){var e=y({},t);return"files"===e.type&&(e.value=JSON.stringify(e.value)),e}));return t},formatRow:function(t){var e={};for(var a in t)"id"!==t[a].field&&(e[t[a].field]=t[a].value);return e},add:function(){var t=this,e=this.formatRow(this.columns);this.$axios.post(this.API,e).then((function(e){e.status&&(t.$axios.toast.success("新增成功"),t.addDialog=!1)}))}}},q=_,w=Object(g["a"])(q,s,o,!1,null,null,null),x=w.exports,P={components:{Action:x},props:{title:String,paginationSetting:Object,API:String,columns:Array},data:function(){return{filter:"",pagination:this.paginationSetting,loading:!1,data:[]}},mounted:function(){this.onRequest({pagination:this.pagination,filter:void 0})},methods:{onRequest:function(t){var e,a=t.pagination,n=a.page,i=a.rowsPerPage,l=a.rowsNumber,s=a.sortBy,o=a.descending,u=t.filter;this.loading=!0;var c=(n-1)*i,d=0===i?l:i,p=this.getDataFromSever(c,d,u,s,o);this.pagination.rowsNumber=p.length,(e=this.data).splice.apply(e,[0,this.data.length].concat(r()(p))),this.pagination.rowsNumber=p.length,this.pagination.page=n,this.pagination.rowsPerPage=i,this.pagination.sortBy=s,this.pagination.descending=o,this.loading=!1},getDataFromSever:function(t,e,a,n,i){var l=this;return this.$axios.get(this.API,{page_num:0,page_size:10}).then((function(t){l.data=t.data.value.list})),n&&this.data.sort((function(t,e){var a=i?e:t,l=i?t:e;return"desc"===n?a[n]>l[n]?1:a[n]<l[n]?-1:0:parseFloat(a[n])-parseFloat(l[n])})),this.data}}},O=P,S=Object(g["a"])(O,n,i,!1,null,null,null);e["a"]=S.exports},f31f:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"flex flex-center"},[a("Table",{attrs:{title:"文章管理",API:t.API,"pagination-setting":t.pagination,columns:t.columns}})],1)},i=[],l=a("0748"),r={components:{Table:l["a"]},data:function(){return{API:"posts",pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:3,rowsNumber:10},columns:[{name:"id",required:!0,label:"id",align:"center",field:"id",sortable:!0},{name:"files",type:"files",align:"center",label:"圖片",field:"files",sortable:!0,value:[]},{name:"title",type:"input",align:"center",label:"標題",field:"title",sortable:!0,value:""},{name:"summary",type:"textarea",align:"center",label:"簡介",field:"summary",sortable:!0,value:""}],data:[]}}},s=r,o=a("2877"),u=Object(o["a"])(s,n,i,!1,null,null,null);e["default"]=u.exports}}]);